
<!DOCTYPE html>
<html lang="en">
<head>
<title>Using FT8 to Benchmark Station Rx/Tx Performance with wsjt_all</title>


<script data-goatcounter="https://g1ojs-github.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>

<link rel="stylesheet" href="./corestyle.css" /> 
<link rel="stylesheet" href="./pagestyle.css" /> 
<style>


</style>

</head>
<body>

<div id = 'page-container'>

	<div style='height:max-content'>
		<img class = 'image-right' src = './wsjt_all_screenshot.png' height = 400></img>
		<h1>Using FT8 to Benchmark Station Rx/Tx Performance with wsjt_all</h1> 
		<h2>Introduction</h2>
		This page gives some background about why I developed wsjt_all; a bit about my personal exploration of ways to check that I'm 
		getting the best possible performance out of my ham radio station, given the constraints I have. Every ham radio station
		has constraints of *some* kind, and part of the fun of the hobby for me is working out how to do the best with the situation you're in. 
		Getting instant signal reports in volume from <a href = 'https://pskreporter.info/'>pskreporter</a> has been a huge help in achieving this.
	</div>

	<div style='height:max-content'>
		<h3> My station</h3> 
		I live in a conservation area where no outside antennas are permitted, so everything I use is indoors. 
		<img class = 'image-left' src = './chimney.png' height = 170></img>
		Some of the antennas that I use are inside the decorative glass fibre chimney shown below!
		Despite this, when I look at pskreporter,
		I often have the longest distance reach, and largest coverage area, of stations operating from my country (England), on what I would call 
		some of the most difficult bands; 80m, 160m, and 2m. And that's on both transmit and receive with a single Icom IC-7100 as the station transceiver. 
		I'm not claiming to 'win' all the time; clearly there are many stations with long Yagis reaching far into Europe on 2m and stations with superb 
		receiving antennas in remote locations who do far better than I do. But what I do know is that I'm winning the battle against local QRM and using 
		antennas that work well on transmit too, and I'm *absolutely* doing better than at least half of other stations irrespective of location.
	</div>

	<div style='height:max-content'>
		<h4>TL;DR - the antennas</h4>
		<img class = 'image-right' src = './contraspiral.jpg' height = 200></img>
		I've worked with attic antennas in two houses now over the last decade, and found that it's pretty easy to set up a fan dipole to cover at 
		least 20m to 10m if not 40m to 6m. 
		<p>
		What I use currently is:
		<ul>
		<li>160, 80, 60, 40: Small transmitting loop 7.5m circumference made from 10mm copper tube</li>
		<li>20, 15, 17, 10, 6m: fan dipole (I don't have 30m and 12m currently)</li>
		<li>2m - my <a href = 'https://github.com/G1OJS/G1OJS_ContraSpiral'>G1OJS Contraspiral (pictured right)</a></li>
		</ul>
		</p>
		<p>
		The thing that has made the most difference though is the addition of an active receive loop to these antennas for HF work. I use an LZ1AQ amplifier 
		with a small loop made from 20mm wide aluminium strip, right at the top of the attic. Using the fan dipoles for Rx results in a very high noise 
		floor even with careful minimisation (and measurement of) common mode currents. I have previously used an end-fed wire cut to 20m length, bent into a U shape
		to fit in my 5m x 5m attic space, which was great on transmit but even worse on receive than the fan dipoles as you would expect!
		</p>
	</div>

	<div style='height:max-content'>
		<h2>Benchmarking</h2>
		After I had played the game of watching the noise level on the S meter whilst adding chokes, turning off ring mains and devices etc, 
		running up and downstairs and scribbling notes and thinking "was that better?", I got interested in what I could do with pskreporter.
		Using the online maps helped me get a feel for how well my antennas were working on transmit, but I didn't get much info
		for receive. When I later learned that once you get a spot on pskrepoter from a particular station, you won't get another 
		for at least 20 minutes, I started to dig into using the live data feed from <a href = 'http://mqtt.pskreporter.info/'>mqtt.pskreporter.info</a>
		where there is no 20 minute limitation on repeated spots.

		<h3>BandOpticon</h3>
		The first thing I did with the live data feed was write some software to show a live view of the digi-mode activity to and from my neighboring 
		ham stations (in nearby Maidenhead squares). This told me what band activity was like *now* and at least I could then tell if bands were active 
		but for some reason I couldn't hear activity. That was the first objective measure in a sea of subjective ones!
		After a lot of work learning Python (where BandOpticon started) and then re-learning JavaScript, I developed BandOpticon into a web-based 
		page so that anyone can use it. The current version is <a href = 'https://g1ojs.github.io/BandOpticon/BandOpticon'>here</a>. 
		You can use this web page to see what bands are active, and get a view of what the connectivity is between your local squares or stations 
		and remote squares/callsigns. There are some experimental views in there that look towards benchmarking too.

		<h3>Wsjt-all</h3>
		After playing with the experimental views in BandOpticon, I started thinking about using the data in the WSJT-X 'all.txt' file. On a few occaions I had tried 
		setting up a second instance of WSJT-X to make decodes using the audio from a web SDR, and watching the waterfalls to compare noise levels. I also
		tried copy and paste of the decodes from WSJT-X and went through them manually in notepad, matching up decodes to compare the reports. This provides some 
		snapshot information, but is quite tedious to do repeatedly!
		<p>
		But the 'all.txt' file records every decode made on receive, and I started thinking about using that as the data source. One problem here is that these files
		can become huge, and take an age to open in notepad (I eventually found Notepad++ which opens them much faster). So I started thinking about automating the process.
		</p>
		<p>
		Wsjt_all, at Version 1.3, is focussed on exactly this problem. It takes two 'all.txt' files and looks for 'sessions' within them. I've defined a session as
		a set of decodes where the gap between one decode and the next doesn't exceed a particular number of seconds and the band and mode don't change. This
		alone is a useful thing to start with, and I made it the first step so that later versions might do something useful with indivudual all.txt files
		as well as pairs.
		</p>
		<p>		
		Once the sessions are found, the program looks for sessions that exist in both files at the same time (i.e. overlap in time to contain at least some decodes in 
		each file). Once these sessions are found, they are processed to do some analysis based on the reports they contain.
		</p>
		<p>		
		<h4>Comparing SNR and just ... counting</h4>
		At this point, I'm still searching for good ways to analyse and present the data. 
		</p>
		<p>
		Comparing 'signal reports' automatically seems to be a good idea, 
		and there is certainly some useful information there. However, this can only reasonably be done if the reports are simultaneous, or very close in time; if
		there is too much time between the reports, uncertainty creeps in due to fading and lack of knowledge about the transmitting station's power settings and 
		beam heading (for example). And that also throws away the information about the callsigns received by one station and not the other.
		</p>
		<p>
		Perhaps what's more important is the simple fact of whether a station was received or not - after all, that's the defining characteristic of 
		communication. So counting the number of times each callsign was received in each all.txt file probably carries a lot of weight.
		</p>
		<h4>Wsjt_all Plots (V1.3)</h4>
		<b>So, V1.3 produces plots like the one shown on the left.</b>
		<img class = 'image-left' src = './wsjt_all_screenshot.png' height = 400></img>
		<p>
		At the top of the image, the title identifies the 'joint' session frequency, mode, start time and duration. Immediately under the title is
		a graphic that illustrates the number of callsigns received in A only, B only, and in both A and B. This alone is good information!
		</p>
		<p>
		Below that, the first graph shows a coloured spot for each callsign received, with the X and Y axis showing the number of times that
		particular callsign was received in each all file. Points lying on the dashed diagonal line were received an equal number of times
		in each file (receive configuration). Points lying on one axis were received only in the all file referred to in the axis label.
		Note that some random movement is applied to the points so that points don't fully lie on top of each other & can hence be seen,
		so points won't necessarily lie exactly on an axis.
		<p>
		The second plot compares the SNR reports, <u>only for callsigns with decodes in both all files</u>. Again, points lying on the dashed diagonal line
		represent equality between each file (receive configuration). The number of callsigns received 
		in a typical session on a very active HF band can easily be in the hundreds, and it is not possible
		to create a colour palette that enables the human eye to track individual callsigns in the mix. Hence, I've added lines connecting
		reports for each individual callsign. <b>Note</b> that this chart is not intended to be used for detailed inspection: it is the 
		overall 'impression' that is important, along with 'outliers' that can be easily seen.
		</p>
		
		
		<h2>Next steps</h2>
		Wsjt_all is quite new (I only started working on it about a week ago) and at the outset I didn't really know if the data 
		could be displayed in a meaningful and useful way, let alone how to present it with the best clarity and information content.
		<p>
		So one of the next things I'll do is experiment more with the plots. I might also add a 'data dump' feature for the chart data,
		so that others can produce their own plots. I've started tracking ideas in the 'issues' section on GitHub, so have a look there too.
		</p>
		
		
	</div>

</div>
